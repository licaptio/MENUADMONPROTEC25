<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>BODEGA41 - Orden de Compra</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: #f4f4f4;
    margin: 0;
    padding: 20px;
  }

  h2 {
    text-align: center;
    background: #222;
    color: white;
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 20px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
    font-size: 14px;
  }

  th {
    background: #333;
    color: white;
  }

  tr:nth-child(even) {
    background: #f9f9f9;
  }

  /* Quitar spinners de inputs num√©ricos */
  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type="number"] {
    width: 70px;
    border: none;
    text-align: right;
    font-size: 14px;
    padding: 4px;
  }

  .btn {
    padding: 12px;
    margin: 6px 2px;
    border: none;
    color: white;
    font-size: 14px;
    cursor: pointer;
    border-radius: 5px;
    width: 100%;
    max-width: 250px;
  }

  .btn-green { background: #28a745; }
  .btn-green:hover { background: #218838; }

  .btn-red { background: #dc3545; }
  .btn-red:hover { background: #b52a37; }

  .btn-blue { background: #007bff; }
  .btn-blue:hover { background: #0056b3; }

  .btn-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    margin-bottom: 20px;
  }

  @media (max-width: 600px) {
    table, th, td {
      font-size: 12px;
    }
    input[type="number"] {
      width: 50px;
    }
  }
</style>
</head>
<body>

<h2>BODEGA41 - Orden de Compra</h2>

<div class="btn-container">
  <button class="btn btn-green" onclick="enviarTelegram()">üì§ Enviar a Telegram</button>
  <button class="btn btn-blue" onclick="generarImagen()">üñºÔ∏è Generar Imagen Pedido</button>
  <button class="btn btn-red" onclick="limpiarPedidos()">üßπ Limpiar Pedidos</button>
</div>

<table id="tabla">
  <thead>
    <tr>
      <th>CONCEPTO</th>
      <th>INVENTARIO</th>
      <th>STOCK</th>
      <th>PEDIDO</th>
    </tr>
  </thead>
  <tbody id="tabla-cuerpo"></tbody>
</table>

<script>
const BOT_TOKEN = "8303572166:AAH0xLN7798A3LROd3CoGkq0RqVogrLhZtw";
const CHAT_ID = "6617988297";

const data = [
  ["AZUCAR MORENA 25", "", 100],
  ["AZUCAR BLANCA 25", "", 20],
  ["MORENA SWITEN 907", "", 30],
  ["AZUCAR GLASS 6X", "", 3],
  ["FECULA DE MAIZ", "", 3],
  ["AZUCAR MOSCABADA", "", 2],
  ["GLUCOSA 19LTS 27K", "", 2],
  ["NUTRILECHE CAMA 15 T 90", "", "6T"],
  ["50X70 NEGRA C/25KG", "", 10],
  ["70X90 NEGRA C/25 KGS.", "", 20],
  ["90X120 NEGRA C/25 KGS.", "", 40],
  ["HIG JUMBO DALIA360", "", 30],
  ["HIG JUNIOR DALIA180", "", 30],
  ["MARLY 12 C/500", "", 30],
  ["BARRA MESA C/24", "", 10],
  ["SANITA", "", 40],
  ["TR160 C/6 MOC BLA", "", 30],
  ["MOCAMBO LITHE C/16", "", 30]
  // ... puedes seguir llenando con el resto de tu lista
];

const tbody = document.getElementById("tabla-cuerpo");
data.forEach(fila => {
  const [concepto, inventario, stock] = fila;
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td>${concepto}</td>
    <td>${inventario}</td>
    <td>${stock}</td>
    <td><input type="number" min="0"></td>
  `;
  tbody.appendChild(tr);
});

function enviarTelegram() {
  let mensaje = "ORDEN DE COMPRA BODEGA41:\n";
  document.querySelectorAll("#tabla tbody tr").forEach(tr => {
    const concepto = tr.cells[0].textContent;
    const pedido = tr.cells[3].querySelector("input").value;
    if (pedido && pedido > 0) {
      mensaje += `${concepto}: ${pedido}\n`;
    }
  });
  if (mensaje === "ORDEN DE COMPRA BODEGA41:\n") {
    alert("No hay pedidos para enviar.");
    return;
  }
  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ chat_id: CHAT_ID, text: mensaje })
  }).then(() => alert("Pedido enviado a Telegram"));
}

function generarImagen() {
  const pedido = [];
  document.querySelectorAll("#tabla tbody tr").forEach(tr => {
    const concepto = tr.cells[0].textContent;
    const pedidoVal = tr.cells[3].querySelector("input").value;
    if (pedidoVal && pedidoVal > 0) {
      pedido.push([concepto, pedidoVal]);
    }
  });
  if (pedido.length === 0) {
    alert("No hay pedidos para generar imagen.");
    return;
  }
  const ventana = window.open("", "", "width=600,height=800");
  ventana.document.write(`
    <html><head><title>Pedido</title></head>
    <body style="font-family: Arial; padding: 20px;">
      <h2 style="text-align:center;">ORDEN DE COMPRA PROVEEDORA DE DULCES Y DESECHABLES</h2>
      <table border="1" cellspacing="0" cellpadding="6" style="width:100%;border-collapse:collapse;">
        <tr><th>CONCEPTO</th><th>PEDIDO</th></tr>
        ${pedido.map(p => `<tr><td>${p[0]}</td><td>${p[1]}</td></tr>`).join("")}
      </table>
    </body></html>
  `);
  ventana.document.close();
}

function limpiarPedidos() {
  document.querySelectorAll("#tabla tbody tr input").forEach(input => input.value = "");
}
</script>

</body>
</html>
