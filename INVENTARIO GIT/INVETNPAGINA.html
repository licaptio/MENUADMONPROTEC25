<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Paginaci√≥n Inventarios</title>
<style>
  :root{
    --primary:#2c3e50; --secondary:#3498db; --bg:#f7f8fb; --border:#e2e8f0;
    --text:#1f2937; --ok:#16a34a; --warn:#f59e0b; --card:#fff; --muted:#6b7280;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:Arial, sans-serif;
    background:var(--bg); color:var(--text);
    padding:10px 10px 84px;
  }
  .container{max-width:900px;margin:0 auto}
  header{position:sticky;top:0;z-index:50;background:var(--bg);padding:6px 0 8px}
  h2{
    font-size:1.12rem;text-align:center;color:var(--primary);
    background:var(--card);border-radius:12px;padding:8px 10px;
    box-shadow:0 2px 8px rgba(0,0,0,.06); margin-bottom:6px;
    display:flex;justify-content:center;gap:8px;align-items:center
  }
  table{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden}
  thead th{background:var(--primary);color:#fff;padding:.6rem}
  td{padding:.5rem;border-bottom:1px solid var(--border)}
  .producto{font-weight:bold}
  .compact-row{display:flex;align-items:center;gap:5px}
  .spinner{display:inline-flex;align-items:center;gap:4px}
  .spinner button{
    background:#e5e7eb;border:none;border-radius:6px;padding:2px 6px;
    cursor:pointer;font-size:1rem;font-weight:bold;line-height:1
  }
  .stock-badge{font-size:.85rem;background:#f9fafb;padding:2px 6px;border-radius:6px}
  /* acciones abajo */
  .actions{position:fixed;left:0;right:0;bottom:0;background:#fff;padding:8px;border-top:1px solid #ddd}
  .grid{display:grid;grid-template-columns:repeat(5,1fr);gap:6px}
  button.action{padding:.6rem .5rem;font-weight:bold;border:none;border-radius:10px;color:#fff}
  #btn-anterior{background:#9ca3af} #btn-siguiente{background:var(--ok)}
  #btn-enviar{background:var(--warn)} #btn-orden{background:#6d28d9}
  #btn-limpiar{background:#ef4444}
/* Quitar spinners de los inputs tipo number */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
input[type=number] {
  -moz-appearance: textfield; /* Firefox */
}
/* Modal */
.modal {
  display:none; position:fixed; z-index:100; left:0; top:0;
  width:100%; height:100%; background:rgba(0,0,0,0.4);
  justify-content:center; align-items:center;
}
.modal-content {
  background:#fff; padding:20px; border-radius:12px;
  max-width:400px; width:90%; text-align:center;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
  animation:fadeIn .3s;
}
.modal-content h3 {margin-bottom:10px; color:#111;}
.modal-content ul {list-style:none; padding:0; margin:10px 0;}
.modal-content li {padding:6px 0; border-bottom:1px solid #eee;}
.modal-content li:last-child{border-bottom:none;}
.modal-content strong{color:#000; font-weight:700;}
.modal button {
  background:#2563eb; color:white; border:none;
  padding:8px 20px; border-radius:8px; margin-top:12px;
  cursor:pointer; font-size:1rem;
}
@keyframes fadeIn {from{opacity:0; transform:scale(.9);} to{opacity:1; transform:scale(1);} }
.indice {
  background:#fff; border:1px solid var(--border); border-radius:10px;
  padding:8px; margin-bottom:10px; box-shadow:0 2px 6px rgba(0,0,0,.05);
  display:flex; flex-wrap:wrap; gap:6px;
}
.indice button {
  background:var(--secondary); color:#fff; border:none;
  padding:6px 10px; border-radius:6px; cursor:pointer;
  font-size:0.85rem;
}
.indice button:hover { background:#2563eb; }

</style>
</head>
<body>
  <div class="container">
    <header>
      <h2><span>üì¶</span><span id="titulo"></span></h2>
      <div id="pagination-info" style="text-align:center;margin-bottom:6px;color:#555"></div>
    </header>

    <div id="indice" class="indice"></div>

    <div class="table-container">
      <table id="tabla">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Inventario manual</th>
            <th>Stock</th>
            <th>Pedido</th>
            <th>Inventario acumulado</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Barra acciones -->
  <div class="actions">
    <div class="grid">
      <button id="btn-anterior" class="action" onclick="anterior()">‚¨Ö Anterior</button>
      <button id="btn-enviar" class="action" onclick="enviarTelegram()">üì§ Enviar</button>
      <button id="btn-limpiar" class="action" onclick="limpiarTodo()">üßπ Limpiar</button>
      <button id="btn-orden" class="action" onclick="generarOrden()">üßæ Orden</button>
      <button id="btn-siguiente" class="action" onclick="siguiente()">Siguiente ‚û°</button>
    </div>
  </div>

<script>
/* ===== Datos (inserta aqu√≠ tu arreglo inventarios del archivo anterior) ===== */
  /* ===== Datos ===== */
  const inventarios = [
  { nombre: "üìë √çndice", items: [] },   // üëâ ESTA ES LA P√ÅGINA 0 (√≠ndice)
    { nombre:"üì¶ PAPEL GLORIA Y BOLSA", items:[
      ["PAPEL CELOF√ÅN ROJO 25KG","",20,""],
      ["PAPEL CELOF√ÅN AMARILLO 25KG","",10,""],
      ["PAPEL CELOF√ÅN BLANCO 25KG","",7,""],
      ["BOLSA CELOF√ÅN 14X20 C35 CAJA","",4,""],
    ]},
    { nombre:"üì¶ Az√∫cares y derivados", items:[
      ["AZ√öCAR MORENA 25","",100,""],
      ["AZ√öCAR BLANCA 25","",20,""],
      ["MORENA SWITEN 907","",30,""],
      ["AZ√öCAR GLASS 6X","",3,""],
      ["F√âCULA DE MA√çZ","",3,""],
      ["AZ√öCAR MOSCABADA","",2,""],
      ["GLUCOSA 19 LTS 27K","",2,""],
    ]},
    { nombre:"üì¶ CONDIMENTO PORCIONADO", items:[
      ["SAL DELAGG C/3000PZ","",5,""],
      ["AZUCAR PORCION C/1000","",10,""],
      ["CHILE QUEBRADO C/1000","",30,""],
  ]},
  
    { nombre:"üì¶ BODEGA LIQUIDO", items:[
      ["MORENA SWITEN 907","",50,""],
      ["NUTRILECHE C90 PAQ","",8,""],
      ["KARTAMUS 12 CAMA","",100,""],
      ["HARIMASA C10","",100,""],
      ["CHILE FARO ROD","",100,""],
      ["KLEENEX 80","",100,""],
    ]},
    { nombre:"üì¶ INIX", items:[
      ["HQR1230","",30,""],["HQR1238","",10,""],["HQR1245","",10,""],
      ["HQR30 VITAFILM","",15,""],["AL2923 REC CHICA","",5,""],
      ["AL4032O OVALADA","",5,""],["AL4130R REC GRANDE","",10,""],
      ["F3029","",2,""],["FCB100012 CAJAB/6","",10,""],["32PP","",50,""],
      ["16PP","",40,""],["8PP","",10,""],["TPP8","",100,""],
    ]},
    { nombre:"üì¶ COLOR CUBETAS", items:[
      ["AMARILLO HUEVO","",2,""],["NARANJA ROJIZO","",2,""],
    ]},    
    { nombre:"üì¶ BOLSA BASURA", items:[
      ["50X70 NEGRA C/25KG","",10,""],["70X90 NEGRA C/25KG","",20,""],
      ["90X120 NEGRA C/25KG","",40,""],["EMPLAYE P/ENTARIMAR","",300,""],
      ["REVOLUCI√ìN CORTO","",50,""],["REVOLUCI√ìN LARGO","",20,""],
      ["BOLSA 55X65","",4,""],["BOLSA 65X65","",4,""],["VIVERO CHICA","",10,""],
      ["VIVERO MEDIANA","",10,""],["VIVERO GRANDE","",10,""],["ROLLOS NEGROS","",4,""],
      ["ROLLOS TRANSPARENTE","",4,""],["10X20 BOLLERA C/200","",20,""],["BOLSA GOURMET","",3,""],
    ]},
  { nombre:"üì¶ Cerillos", items:[
    ["TALISMAN DE LUJO 20/5","",0,""],
    ["CLASICOS DE LUJO 20/5","",10,""],
    ["MANOLA","",2,""],
    ["FLAMA 50/5 DE 115PZ","",2,""],
    ["FLAMA 50/5 DE 200PZ","",2,""],
    ["MAYA 10/50","",40,""],
  ]},
  
    { nombre:"üì¶ L√≠quido Zapata", items:[
    ["BIG COLA 3.3","",12,""],
    ["BIG COLA 1.5","",3,""],
    ["BIG COLA 500 ML","",3,""],
    ["CIFRUT 3.3","",0,""],
    ["CIFRUT 625","",2,""],
    ["CIFRUT 300","",2,""],
    ["BIG COLA 300","",0,""],
    ["CHECHI FRESCO 140 ML","",800,""],
    ["AGUA 500 ML T72","",12,""],
    ["AGUA 1 L T80","",12,""],
    ["AGUA 1.5 T42","",4,""],
  ]},
  { nombre:"üì¶ Converemex", items:[
    ["VASO 104","",10,""],
    ["VASO 106","",100,""],
    ["VASO 108","",60,""],
    ["VASO 110","",150,""],
    ["VASO 112","",150,""],
    ["VASO 114","",100,""],
    ["VASO 116","",100,""],
    ["VASO 132","",100,""],
    ["VASO 120","",0,""],
    ["ENVASE 704","",20,""],
    ["ENVASE 706","",60,""],
    ["ENVASE 708","",60,""],
    ["ENVASE 712","",10,""],
    ["ENVASE 716","",100,""],
    ["ENVASE 732","",200,""],
    ["TAPA 404 LISO","",0,""],
    ["TAPA 406 LISO","",0,""],
    ["TAPA 406 PIQUETE","",30,""],
    ["TAPA PS 408 POPOTE","",10,""],
    ["TAPA PS 410 POPOTE","",10,""],
    ["TAPA PS 412 POPOTE(112,706)","",40,""],
    ["TAPA PS 414 POPOTE(114,116)","",30,""],
    ["TAPA PS 416 POPOTE(132,716,732)","",50,""],
    ["TAPA EPS 516 PIQUETE","",20,""],
  ]},
  
 { nombre:"üì¶ Palmex", items:[
  ["10X10 C/15 KGS. PASTA","",80,""],
  ["ANILLO C/20 KGS.","",0,""],
  ["DONA C/20 KGS.","",0,""],
  ["ESPACIAL C/15K","",0,""],
  ["MINI CUADRO C/20 KGS.","",20,""],
  ["ROTINI C/20 KGS.","",20,""],
  ["RUEDA GRANDE C/13 KGS.","",20,""],
  ["HOJUELA PAPA 8 KGS.","",30,""],
  ["ARITOS 3 KGS.","",0,""],
  ["ZUCARIN C/15 KGS.","",0,""],
  ["CORN FLAKES 10 KGS.","",0,""],
  ["ARROZ CHOCOLATE","",0,""],
]},

  { nombre:"üì¶ Mega Alimento", items:[
    ["SALSA BOT 1 LTO. C/12","",150,""],
    ["SALSA BOT 1.5 C/12","",40,""],
    ["SALSA BOT 10 GRS C/840","",40,""],
    ["SALSA BOT 5 GRS. C/1500","",15,""],
    ["SALSA BOT 500 ML. C/24","",150,""],
    ["SALSA BOT DE GALON C/6","",80,""],
    ["SALSA BOT LIMON 1 LTO C/12","",30,""],
    ["MAYO STAR VALUE AZUL 3.45","",20,""],
    ["MAYO STAR PORC. 6/200","",5,""],
    ["MOSTAZA STAR VALUE 6/3.53","",5,""],
    ["MOSTAZA STAR PORC. 6/200","",5,""],
    ["CATSUP STAR 3.8 KGS. C/6","",20,""],
    ["CATSUP STAR VALUE 6/200","",30,""],
    ["ADEREZO STAR VALUE 3.52","",20,""],
    ["MAYO MEGA 3.57 KGS. C/6","",15,""],
    ["ADEREZO MEGA C/6 DE 3.65","",15,""],
    ["CATSUP MEGA RICA 6/4.5","",15,""],
    ["MOSTAZA MEGA 6/3.7","",15,""],
  ]},
  { nombre:"üì¶ BOTANAS", items:[
    ["SABRISURTIDO 35","",150,""],
    ["TOSTITO VERDE","",30,""],
    ["TOSTITO MORADO","",10,""],
    ["FRITURA ENCANTO","",10,""],
  ]},
    { nombre:"üì¶ Comida para mascotas", items:[
      ["RINGO C20","",100,""],["PEDIGREE ADULTO","",10,""],
      ["PEDIGREE CACHORRO","",10,""],["WHISKAS","",10,""],
    ]},
    { nombre:"üì¶ Papel higi√©nico y servilletas", items:[
      ["HIG JUMBO DALIA 360","",30,""],["HIG JUNIOR DALIA 180","",30,""],
      ["MARLY 12 C/500","",30,""],["BARRA MESA C/24","",10,""],
      ["SANITA","",40,""],["TR160 C/6 MOC BLA","",30,""],["MOCAMBO LITHE C/16","",30,""],
    ]},
    { nombre:"üì¶ Cacahuates, botanas, hoja tamal y chile japon√©s", items:[
      ["CACAHUATE BLANCO SALADO 10KG","",1,""],["CACAHUATE ENCHILADO MITADES 10KG","",3,""],
      ["CACAHUATE GARAPI√ëADO 10KG","",20,""],["CACAHUATE SALADO 10KG","",20,""],
      ["CANTINERO TOTOPO Y AJO","",15,""],["MIXTO CON FRITURA 10KG","",10,""],
      ["JAPON√âS HOT NUT 10KG","",10,""],["JAPON√âS 10KG","",10,""],
      ["CHICHARR√ìN CERDO KILO","",3,""],["CHICHARR√ìN KRANKY KILO","",3,""],
      ["HOJA TAMAL BULTOS","",10,""],["CHILE JAPON√âS BULTOS","",1,""],
    ]},
    { nombre:"üì¶ Conos", items:[["CONO DEL 8","",3,""],["CONO DEL 35","",10,""]]},
  { nombre:"üì¶ CREMAS Y ADEREZOS BOLFRUTS", items:[
    ["CREMA CAMELIA 10/1KG","",100,""],
    ["ADEREZO VIRMAR 10/1KG","",100,""],
    ["ADEREZO FROMELY 10/850GR","",40,""],
    ["CREMA FROMELY 10/850GR","",40,""],
    ["JUGO BONLANTI 4/10","",100,""],
    ["BOLIFRUT BONLATI 10/15","",15,""],
    ["TROLEBOLI BONLANTI 4/10","",10,""],
    ["COBERTURA BONLATI","",5,""],
    ["COBERTURA CURIOS","",50,""],
  ]},
   { nombre:"üì¶ Puratos", items:[
    ["CREMA VEGETAL AMBIANTE","",30,""],
    ["CAJETA HORNEABLE PURATO","",10,""],
    ["GLASSE DE FRESA PURATOS","",20,""],
    ["GLASSE DE PI√ëA PURATOS","",10,""],
    ["RELLENO DE FRESA PURATOS","",10,""],
    ["RELLENO DE PI√ëA PURATOS","",10,""],
    ["RELLENO DE VAINILLA","",5,""],
  ]},
  { nombre:"üì¶ Bolsas y rollos", items:[
    // BOLSA NATURAL CORTADA
    ["BOLSA NATURAL CORTADA ‚Ä¢ 6X12 NAT","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 8X12 NAT","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 10X20","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 10X25","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 12X20","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 14X20","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 15X25","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 18X26","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 20X30","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 25X35","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 25X40","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 30X50","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 30X60 CAL 300","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 40X60","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 50X70","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 60X90","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 70X90","",0,""],
    ["BOLSA NATURAL CORTADA ‚Ä¢ 90X1.2","",0,""],
  
    // BOLSA CAMISETA POLIPAPEL BIO
    ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ MINI","",0,""],
    ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ CH","",0,""],
    ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ MED","",0,""],
    ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ GRAD","",0,""],
    ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ JUMBO","",0,""],
  
    // BOLSA CAMISETA POLISEDA
    ["BOLSA CAMISETA POLISEDA ‚Ä¢ MINI","",0,""],
    ["BOLSA CAMISETA POLISEDA ‚Ä¢ CH","",0,""],
    ["BOLSA CAMISETA POLISEDA ‚Ä¢ MED","",0,""],
    ["BOLSA CAMISETA POLISEDA ‚Ä¢ GRAD","",0,""],
  
    // BOLSA CAMISETA BAJA NEGRA
    ["BOLSA CAMISETA BAJA NEGRA ‚Ä¢ CH","",0,""],
    ["BOLSA CAMISETA BAJA NEGRA ‚Ä¢ MED","",0,""],
    ["BOLSA CAMISETA BAJA NEGRA ‚Ä¢ GRAD","",0,""],
  
    // ROLLO DE ALTA
    ["ROLLO DE ALTA ‚Ä¢ 15X26","",0,""],
    ["ROLLO DE ALTA ‚Ä¢ 18X26","",0,""],
    ["ROLLO DE ALTA ‚Ä¢ 20X30","",0,""],
    ["ROLLO DE ALTA ‚Ä¢ 20X30 C120","",0,""],
    ["ROLLO DE ALTA ‚Ä¢ 25X35","",0,""],
    ["ROLLO DE ALTA ‚Ä¢ 25X40","",0,""],
    ["ROLLO DE ALTA ‚Ä¢ 30X40","",0,""],
    ["ROLLO DE ALTA ‚Ä¢ 30X50","",0,""],
    ["ROLLO DE ALTA ‚Ä¢ 40X60","",0,""],
    ["ROLLO DE ALTA ‚Ä¢ 50X70","",0,""],
  
    // ROLLO ALTA TIPO AMERICANO
    ["ROLLO ALTA TIPO AMERICANO ‚Ä¢ 20X30 USA","",0,""],
    ["ROLLO ALTA TIPO AMERICANO ‚Ä¢ 25X40 USA","",0,""],
  
    // BOLSA BASURA
    ["BOLSA BASURA ‚Ä¢ 50X70","",0,""],
    ["BOLSA BASURA ‚Ä¢ 70X90","",0,""],
    ["BOLSA BASURA ‚Ä¢ 90X120","",0,""]
  ]},
  
{ nombre:"üì¶ Tripas", items:[
  ["TRIPA 21","",4,""],["TRIPA 23","",4,""],["TRIPA 26","",2,""],
  ["TRIPA 28","",4,""],["TRIPA 30","",2,""],["TRIPA 32","",0,""],
  ["TRIPA 34","",0,""],["TRIPA 40","",0,""],
]},

    { nombre:"üì¶ Vinagres y vainilla", items:[
      ["VINAGRE BLANCO 1LT C/12","",5,""],["VINAGRE BLANCO 4/4L","",10,""],
      ["VINAGRE BLANCO 355ML C/24","",3,""],["VINAGRE DE MANZANA 355ML C/24","",5,""],
      ["VINAGRE DE MANZANA GAL√ìN","",30,""],["VINAGRE DE MANZANA 12/1LT","",15,""],
      ["VAINILLA 355ML C/24","",2,""],["VAINILLA GAL√ìN C/4","",4,""],
      ["VAINILLA LITRO C/12","",2,""],["VAINILLA BLANCA 1LT","",1,""],
    ]},
    { nombre:"üì¶ Brochetas, c√≥nicos y vasos", items:[
      ["P/BROCHETA No.6 15CM","",2,""],["P/BROCHETA No.8 20CM","",2,""],
      ["P/BROCHETA No.10 25CM","",2,""],["P/BROCHETA No.12 30CM","",3,""],
      ["C√ìNICO 106","",10,""],["C√ìNICO 104","",5,""],["TAPA 0 CUEVAS C/2000","",20,""],
      ["VASO 0 CUEVAS C/2000","",20,""],["TAPA 4-A CUEVAS C/2000","",3,""],
      ["VASO 4-A CUEVAS C/2000","",3,""],
    ]},
    { nombre:"üì¶ Ciervo 2", items:[  
    ["MIEL DE ABEJA 24/175GR","",2,""],  
    ["CHAR RECT 12 PRIMO","",2,""],  
    ["CHAR RECT 14 CUEVAS","",2,""],  
    ["CHAR RECT 20 PRIMO C/100","",2,""],  
    ["CHAR RED. #14 PRIMO C/250","",2,""],  
    ["CHAR REDONDA 12 PRIMO C/300","",2,""],  
    ["CHAR REDONDA 20 PRIMO C/100","",2,""],  
    ["VASO PLAST 10 CRISTAL","",4,""],  
    ["VASO GELATINERO 14","",1,""],  
    ["VASO PLAST 15 CUEVAS","",1,""],  
    ["VASO PLAST 16 CUEVAS","",1,""],  
    ["VASO PLAST 17 CUEVAS","",1,""],  
    ["VASO PLAST 19 CUEVAS","",1,""],  
    ["VASO PLAST 1-C CUEVAS","",10,""],  
    ["PALILLO DIENTES CIERVO 250/14","",2,""],  
    ["PALILLO DIENTES BOTE 250/12","",2,""],  
  ]},
  
    { nombre:"üì¶ Cajas de pizza", items:[
      ["CAJAS DE PIZZA 8","",100,""],["CAJAS DE PIZZA 10","",150,""],
      ["CAJAS DE PIZZA 12","",200,""],["CAJAS DE PIZZA 14","",250,""],
      ["CAJAS DE PIZZA 16","",150,""],["CAJAS DE PIZZA 18","",100,""],
      ["CAJAS DE PIZZA 10 BLANCO","",50,""],["CAJAS DE PIZZA 12 BLANCO","",50,""],
      ["CAJAS DE PIZZA 14 BLANCO","",50,""],["CAJAS DE PIZZA 16 BLANCO","",50,""],
    ]},
    { nombre:"üì¶ Torito", items:[["TORITO LITRO","",60,""],["TORITO GAL√ìN","",60,""]]},
{ nombre:"üì¶ Aluminios y encerados", items:[
  ["ALUMINIO 5 MTS BONALUM","",30,""],
  ["ALUMINIO 7 MTS BONALUM","",30,""],
  ["ALUMINIO 10 MTS BONALUM","",20,""],
  ["ALUMINIO 50 MTS CARO BONALUM","",10,""],
  ["STAR FOIL 500GR C/12 BONALUM","",2,""],
  ["ALUMINIO 3 KG C/4PZ BONALUM","",2,""],
  ["PAPEL PARA ESTUFA","",50,""],
  ["ALUMINIO 10 MTS ALUMSTAR","",20,""],
  ["ALUMINIO 10 MTS ALUMSTAR","",20,""],
  ["ALUMINIO 10 MTS ALUMSTAR","",5,""],
  ["ENCERADO 10 MTS","",5,""],
  ["ENCERADO 20 MTS","",5,""],
  ["ROLLO ENCERADO 3 KG","",2,""]
]},
{ nombre:"üì¶ LINEA MAJORE", items:[
  // CHAROLA
  ["CH855 MAJORE","",350,""],
  ["CH855 BIO MAJORE","",250,""],
  ["CH066 MAJORE","",100,""],
  ["CH066 BIO MAJORE","",100,""],

  // CONTENEDOR
  ["CN7X7L MAJORE","",50,""],
  ["CN7X7D MAJORE","",60,""],
  ["CN8X8L MAJORE","",20,""],
  ["CN8X8D MAJORE","",10,""],
  ["CNHAM MAJORE","",20,""],

  // PLATO TERMICO
  ["PT10L MAJORE","",10,""],
  ["PT10D MAJORE","",10,""],
  ["PT006 MAJORE","",10,""],
  ["PH8 MAJORE","",10,""],

  // VASO PLASTICO
  ["VP51/2 MAJORE","",10,""],
  ["VP8 MAJORE","",10,""],
  ["VP10 MAJORE","",10,""],
  ["VP12 MAJORE","",10,""],
  ["VP14 MAJORE","",10,""],
  ["VP16L MAJORE","",10,""]
]},

  ];
let pagina = 0;
// === Render principal ===
function render(){ 
  const data = inventarios[pagina];
  document.getElementById("titulo").textContent = data.nombre;
  document.getElementById("pagination-info").textContent = `${pagina+1} de ${inventarios.length}`;

  const tbody = document.querySelector("#tabla tbody");
  tbody.innerHTML = "";

  if(pagina === 0){
    const indiceDiv = document.getElementById("indice");
    indiceDiv.style.display = "flex";
    document.querySelector(".table-container").style.display = "none";
    indiceDiv.innerHTML = "";

    inventarios.forEach((g,i)=>{
      if(i===0) return;
      const btn = document.createElement("button");
      btn.textContent = g.nombre.replace("üì¶ ","");
      btn.onclick = ()=>{ pagina=i; render(); };
      indiceDiv.appendChild(btn);
    });
    return;
  }

  document.getElementById("indice").style.display = "none";
  document.querySelector(".table-container").style.display = "block";

  data.items.forEach((row,i)=>{
    const tr = document.createElement("tr");

    // Producto
    const tdProd = document.createElement("td");
    tdProd.textContent = row[0];
    tdProd.className="producto";
    tr.appendChild(tdProd);

    // Inventario manual
    const tdInv = document.createElement("td");
    const input = document.createElement("input");
    input.type="number"; input.min="0"; input.placeholder="+";
    input.style.width="70px";
    tdInv.appendChild(input);
    tr.appendChild(tdInv);

    // Stock
    const tdStock = document.createElement("td");
    tdStock.textContent = row[2] ?? "";
    tr.appendChild(tdStock);

    // Pedido
    const tdPedido = document.createElement("td");
    const inpPed = document.createElement("input");
    inpPed.type="number"; inpPed.min="0"; inpPed.value=row[3]||"";
    inpPed.oninput = e => { row[3]=e.target.value; saveData(); };
    tdPedido.appendChild(inpPed);
    tr.appendChild(tdPedido);

    // Inventario acumulado
    const tdAcum = document.createElement("td");
    row[4] = row[4] || 0;
    const spanVal = document.createElement("span");
    spanVal.textContent = row[4];
    tdAcum.appendChild(spanVal);

    const spinner = document.createElement("div");
    spinner.className="spinner";
    const btnMenos = document.createElement("button"); btnMenos.textContent="‚àí";
    const btnMas = document.createElement("button"); btnMas.textContent="+";
    spinner.appendChild(btnMenos); spinner.appendChild(btnMas);
    tdAcum.appendChild(spinner);

    input.onchange = () => {
      let v = parseInt(input.value)||0;
      row[4] += v;
      spanVal.textContent = row[4];
      input.value="";
      saveData();
    };
    btnMas.onclick = () => { row[4]++; spanVal.textContent=row[4]; saveData(); };
    btnMenos.onclick = () => { if(row[4]>0){ row[4]--; spanVal.textContent=row[4]; saveData(); } };

    tr.appendChild(tdAcum);
    tbody.appendChild(tr);
  });

  activarNavegacionTeclas();
}

// === Funciones de navegaci√≥n ===
function siguiente(){ if(pagina<inventarios.length-1){ pagina++; render(); } }
function anterior(){ if(pagina>0){ pagina--; render(); } }

// === Guardado Local ===
function saveData(){ localStorage.setItem("inventariosData", JSON.stringify(inventarios)); }
function loadData(){
  const raw = localStorage.getItem("inventariosData");
  if(!raw) return;
  try{ const parsed=JSON.parse(raw);
    if(Array.isArray(parsed)){
      parsed.forEach((p,pi)=>{ if(inventarios[pi]) inventarios[pi].items=p.items; });
    }
  }catch(e){console.error(e);}
}

function limpiarTodo(){
  if(!confirm("¬øBorrar todo inventario y limpiar localStorage?")) return;
  inventarios.forEach(g=>g.items.forEach(r=>{
    r[1] = ""; r[3] = ""; r[4] = 0;
  }));
  localStorage.removeItem("inventariosData");
  render();
  alert("‚úÖ Inventario y localStorage limpiados");
}

/* Telegram y Orden (igual que ten√≠as) */
function enviarTelegram(){
  const data = inventarios[pagina];
  if(!data || !data.items) return;

  // Encabezado
  let mensaje = `üì¶ ${data.nombre}\n\`\`\`\n`;
  mensaje += `Producto                          Acum\n`;
  mensaje += `--------------------------------------\n`;

  data.items.forEach(row=>{
    const acum = parseInt(row[4])||0;
    if(acum>0){
      const nombre = row[0].padEnd(30," ").slice(0,30);
      const acuStr = String(acum).padStart(4," ");
      mensaje += `${nombre} ${acuStr}\n`;
    }
  });

  mensaje += `\`\`\``;

  // Si no hay nada que mandar
  if(mensaje.trim()===`üì¶ ${data.nombre}\n\`\`\`\n\`\`\``){
    alert("‚ö† No hay acumulados en esta p√°gina para enviar");
    return;
  }

  const token  = "8303572166:AAH0xLN7798A3LROd3CoGkq0RqVogrLhZtw"; // tu token
  const chatId = "6617988297"; // tu chat_id

  fetch(`https://api.telegram.org/bot${token}/sendMessage`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      chat_id: chatId,
      text: mensaje,
      parse_mode: "Markdown"
    })
  })
  .then(r=>r.json())
  .then(data=>{
    console.log("Enviado:",data);
    alert("‚úÖ Acumulado enviado a Telegram");
  })
  .catch(err=>{
    console.error(err);
    alert("‚ùå Error al enviar a Telegram");
  });
}


function generarOrden(){
  const modal = document.getElementById("ordenModal");
  const list = document.getElementById("orden-list");
  

  list.innerHTML = "";

  // ID aleatorio tipo PDD...
  const id = "PDD" + new Date().toISOString().slice(2,10).replace(/-/g,"") +
             Math.random().toString(36).substr(2,3).toUpperCase();

  // Ahora muestra con "PROVEEDORA"
  
  inventarios.forEach(g=>{
    g.items.forEach(row=>{
      const pedido = parseInt(row[3])||0;
      if(pedido>0){
        const li = document.createElement("li");
        li.innerHTML = `üì¶ ${row[0]} ‚Üí <strong>${pedido}</strong>`;
        list.appendChild(li);
      }
    });
  });

  if(list.children.length===0){
    list.innerHTML = "<li>No hay productos con pedido</li>";
  }

  modal.style.display="flex";
}
function cerrarModal(){ document.getElementById("ordenModal").style.display="none"; }

/* init */
loadData();
render();  // üëâ Al iniciar, pagina=0 ‚Üí abre √≠ndice

</script>
<div id="ordenModal" class="modal">
  <div class="modal-content" id="ordenContenido" 
       style="text-align:center; padding:20px; background:#fff; border:2px solid #444; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,.3);">

    <!-- Logo -->
    <img src="LOGO.jpeg" alt="Logo Proveedora" 
         style="max-width:180px; margin:0 auto 15px; display:block;">

    <!-- Encabezado -->
    <h3 style="margin:0; font-size:1.6rem; color:#111; text-transform:uppercase;">ORDEN DE COMPRA</h3>

    <!-- Lista de productos -->
    <ul id="orden-list" 
        style="list-style:none; padding:0; margin:20px 0; text-align:left; font-size:1rem; color:#333; line-height:1.5;">
    </ul>

    <!-- Botones -->
    <div style="margin-top:20px;">
      <button onclick="generarImagen()" 
              style="background:#16a34a; color:#fff; border:none; padding:10px 20px;
                     border-radius:8px; font-size:1rem; cursor:pointer; margin-right:10px;">
        üì∏ Generar Imagen
      </button>
      <button onclick="cerrarModal()" 
              style="background:#2563eb; color:#fff; border:none; padding:10px 20px;
                     border-radius:8px; font-size:1rem; cursor:pointer;">
        Cerrar
      </button>
    </div>
  </div>
</div>

<!-- Librer√≠a html2canvas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
function generarImagen(){
  const contenido = document.getElementById("ordenContenido");
  html2canvas(contenido, {scale:2}).then(canvas => {
    // Abre la imagen en nueva pesta√±a lista para copiar o guardar
    const imgData = canvas.toDataURL("image/png");
    const nuevaVentana = window.open("");
    nuevaVentana.document.write("<img src='"+imgData+"' style='width:100%;'/>");
  });
}
// === Navegaci√≥n con flechas en inputs ===
function activarNavegacionTeclas(){
  const inputs = Array.from(document.querySelectorAll("#tabla input"));

  inputs.forEach((inp, idx) => {
    inp.addEventListener("keydown", e => {
      let col = idx % 2;              // 0 = inventario manual, 1 = pedido
      let row = Math.floor(idx / 2);  // fila actual
      let totalFilas = document.querySelectorAll("#tabla tbody tr").length;

      if(e.key === "ArrowRight"){ // ‚Üí
        e.preventDefault();
        if(col === 0 && inputs[idx+1]) inputs[idx+1].focus();
      }
      if(e.key === "ArrowLeft"){ // ‚Üê
        e.preventDefault();
        if(col === 1 && inputs[idx-1]) inputs[idx-1].focus();
      }
      if(e.key === "ArrowDown"){ // ‚Üì
        e.preventDefault();
        let target = (row+1)*2 + col;
        if(target < inputs.length) inputs[target].focus();
      }
      if(e.key === "ArrowUp"){ // ‚Üë
        e.preventDefault();
        let target = (row-1)*2 + col;
        if(target >= 0) inputs[target].focus();
      }
    });
  });
}

</script>

</body>
</html>
