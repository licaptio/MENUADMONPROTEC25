  <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PaginaciÃ³n Inventarios</title>
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --background-color: #f8f9fa;
      --border-color: #ddd;
      --text-color: #333;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding: 1rem; background-color: var(--background-color); color: var(--text-color); line-height: 1.6; }
    .container { max-width: 100%; margin: 0 auto; }
    header { margin-bottom: 1rem; position: sticky; top: 0; background-color: var(--background-color); padding: 0.5rem 0; z-index: 100; }
    h2 { font-size: 1.4rem; color: var(--primary-color); padding: 0.5rem; text-align: center; background-color: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 0.5rem; }
    .table-container { overflow-x: auto; margin-bottom: 1rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); background-color: white; }
    table { width: 100%; border-collapse: collapse; min-width: 300px; }
    th, td { border: 1px solid var(--border-color); padding: 0.75rem; text-align: left; font-size: 0.9rem; }
    th { background-color: var(--primary-color); color: white; font-weight: 600; position: sticky; top: 0; }
    tr:nth-child(even) { background-color: #f2f2f2; }
    .controls { display: flex; justify-content: space-between; margin-top: 1.5rem; gap: 0.5rem; }
    button { flex: 1; padding: 0.8rem; font-size: 1rem; background-color: var(--secondary-color); color: white; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s; font-weight: 600; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    button:disabled { background-color: #95a5a6; cursor: not-allowed; opacity: 0.7; }
    button:active { transform: scale(0.98); }
    .pagination-info { text-align: center; margin: 0.5rem 0; font-size: 0.9rem; color: #7f8c8d; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h2 id="titulo"></h2>
      <div class="pagination-info" id="pagination-info"></div>
    </header>
    
    <div class="table-container">
      <table id="tabla">
<thead>
  <tr>
    <th>Producto</th>
    <th>Inventario</th>
    <th>Stock</th>
    <th>Pedido</th>
  </tr>
</thead>
        <tbody></tbody>
      </table>
    </div>

<div class="controls">
  <button id="btn-anterior" onclick="anterior()">â¬… Anterior</button>
  <button id="btn-enviar" onclick="enviarTelegram()">ðŸ“¤ Enviar InvTEL</button>
  <button id="btn-orden" onclick="generarOrden()">ðŸ§¾ Orden de Compra</button>
  <button id="btn-siguiente" onclick="siguiente()">Siguiente âž¡</button>
</div>
<!-- Modal ORDEN DE COMPRA -->
<div id="modalOrden" style="
  display:none;
  position:fixed;
  top:0; left:0; right:0; bottom:0;
  background:rgba(0,0,0,0.7);
  justify-content:center;
  align-items:center;
  z-index:1000;">
  <div style="background:white; padding:20px; border-radius:10px; max-width:400px; text-align:center;">
    <h3>ORDEN DE COMPRA PDD031204KL5</h3>
    <div id="contenidoOrden"></div>
    <br>
    <button onclick="cerrarOrden()">Cerrar</button>
  </div>
</div>
  
<script>
const inventarios = [
  {
    nombre: "ðŸ“¦ CelofÃ¡n",
    items: [
      ["PAPEL CELOFÃN ROJO 25KG", "", 20, ""],
      ["PAPEL CELOFÃN AMARILLO 25KG", "", 10, ""],
      ["PAPEL CELOFÃN BLANCO 25KG", "", 7, ""],
      ["BOLSA CELOFÃN 14X20 C35 CAJA", "", 4, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ AzÃºcares y derivados",
    items: [
      ["AZÃšCAR MORENA 25", "", 100, ""],
      ["AZÃšCAR BLANCA 25", "", 20, ""],
      ["MORENA SWITEN 907", "", 30, ""],
      ["AZÃšCAR GLASS 6X", "", 3, ""],
      ["FÃ‰CULA DE MAÃZ", "", 3, ""],
      ["AZÃšCAR MOSCABADA", "", 2, ""],
      ["GLUCOSA 19 LTS 27K", "", 2, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ LÃ­quidos",
    items: [
      ["MORENA SWITEN 907", "", 50, ""],
      ["NUTRILECHE C90 PAQ", "", 8, ""],
      ["KARTAMUS 12 CAMA", "", 100, ""],
      ["HARIMASA C10", "", 100, ""],
      ["CHILE FARO ROD", "", 100, ""],
      ["KLEENEX 80", "", 100, ""]
    ]
  },
  {
    nombre: "ðŸ“¦ INIX",
    items: [
      ["HQR1230", "", 30, ""],
      ["HQR1238", "", 10, ""],
      ["HQR1245", "", 10, ""],
      ["HQR30 VITAFILM", "", 15, ""],
      ["AL2923 REC CHICA", "", 5, ""],
      ["AL4032O OVALADA", "", 5, ""],
      ["AL4130R REC GRANDE", "", 10, ""],
      ["F3029", "", 2, ""],
      ["FCB100012 CAJAB/6", "", 10, ""],
      ["32PP", "", 50, ""],
      ["16PP", "", 40, ""],
      ["8PP", "", 10, ""],
      ["TPP8", "", 100, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ PlÃ¡sticos",
    items: [
      ["50X70 NEGRA C/25KG", "", 10, ""],
      ["70X90 NEGRA C/25KG", "", 20, ""],
      ["90X120 NEGRA C/25KG", "", 40, ""],
      ["EMPLAYE P/ENTARIMAR", "", 300, ""],
      ["REVOLUCIÃ“N CORTO", "", 50, ""],
      ["REVOLUCIÃ“N LARGO", "", 20, ""],
      ["BOLSA 55X65", "", 4, ""],
      ["BOLSA 65X65", "", 4, ""],
      ["VIVERO CHICA", "", 10, ""],
      ["VIVERO MEDIANA", "", 10, ""],
      ["VIVERO GRANDE", "", 10, ""],
      ["ROLLOS NEGROS", "", 4, ""],
      ["ROLLOS TRANSPARENTE", "", 4, ""],
      ["10X20 BOLLERA C/200", "", 20, ""],
      ["BOLSA GOURMET", "", 3, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Comida para mascotas",
    items: [
      ["RINGO C20", "", 100, ""],
      ["PEDIGREE ADULTO", "", 10, ""],
      ["PEDIGREE CACHORRO", "", 10, ""],
      ["WHISKAS", "", 10, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Papel higiÃ©nico y servilletas",
    items: [
      ["HIG JUMBO DALIA 360", "", 30, ""],
      ["HIG JUNIOR DALIA 180", "", 30, ""],
      ["MARLY 12 C/500", "", 30, ""],
      ["BARRA MESA C/24", "", 10, ""],
      ["SANITA", "", 40, ""],
      ["TR160 C/6 MOC BLA", "", 30, ""],
      ["MOCAMBO LITHE C/16", "", 30, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Cacahuates, botanas, hoja tamal y chile japonÃ©s",
    items: [
      ["CACAHUATE BLANCO SALADO 10KG", "", 1, ""],
      ["CACAHUATE ENCHILADO MITADES 10KG", "", 3, ""],
      ["CACAHUATE GARAPIÃ‘ADO 10KG", "", 20, ""],
      ["CACAHUATE SALADO 10KG", "", 20, ""],
      ["CANTINERO TOTOPO Y AJO", "", 15, ""],
      ["MIXTO CON FRITURA 10KG", "", 10, ""],
      ["JAPONÃ‰S HOT NUT 10KG", "", 10, ""],
      ["JAPONÃ‰S 10KG", "", 10, ""],
      ["CHICHARRÃ“N CERDO KILO", "", 3, ""],
      ["CHICHARRÃ“N KRANKY KILO", "", 3, ""],
      ["HOJA TAMAL BULTOS", "", 10, ""],
      ["CHILE JAPONÃ‰S BULTOS", "", 1, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Conos",
    items: [
      ["CONO DEL 8", "", 3, ""],
      ["CONO DEL 35", "", 10, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Cremas, aderezos y especias",
    items: [
      ["CREMA CAMELIA 10/1KG", "", 60, ""],
      ["ADEREZO VIRMAR 10/1KG", "", 60, ""],
      ["ADEREZO FROMELY 10/850GR", "", 100, ""],
      ["CREMA FROMELY 10/850GR", "", 60, ""],
      ["CHILE QUEBRADO C/1000", "", 30, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Tripas",
    items: [
      ["TRIPA 21", "", 4, ""],
      ["TRIPA 23", "", 4, ""],
      ["TRIPA 26", "", 2, ""],
      ["TRIPA 28", "", 4, ""],
      ["TRIPA 30", "", 2, ""],
      ["TRIPA 32", "", "-", ""],
      ["TRIPA 34", "", "-", ""],
      ["TRIPA 40", "", "-", ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Vinagres y vainilla",
    items: [
      ["VINAGRE BLANCO 1LT C/12", "", 5, ""],
      ["VINAGRE BLANCO 4/4L", "", 10, ""],
      ["VINAGRE BLANCO 355ML C/24", "", 3, ""],
      ["VINAGRE DE MANZANA 355ML C/24", "", 5, ""],
      ["VINAGRE DE MANZANA GALÃ“N", "", 30, ""],
      ["VINAGRE DE MANZANA 12/1LT", "", 15, ""],
      ["VAINILLA 355ML C/24", "", 2, ""],
      ["VAINILLA GALÃ“N C/4", "", 4, ""],
      ["VAINILLA LITRO C/12", "", 2, ""],
      ["VAINILLA BLANCA 1LT", "", 1, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Brochetas, cÃ³nicos y vasos",
    items: [
      ["P/BROCHETA No.6 15CM", "", 2, ""],
      ["P/BROCHETA No.8 20CM", "", 2, ""],
      ["P/BROCHETA No.10 25CM", "", 2, ""],
      ["P/BROCHETA No.12 30CM", "", 3, ""],
      ["CÃ“NICO 106", "", 10, ""],
      ["CÃ“NICO 104", "", 5, ""],
      ["TAPA 0 CUEVAS C/2000", "", 20, ""],
      ["VASO 0 CUEVAS C/2000", "", 20, ""],
      ["TAPA 4-A CUEVAS C/2000", "", 3, ""],
      ["VASO 4-A CUEVAS C/2000", "", 3, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Cajas de pizza",
    items: [
      ["CAJAS DE PIZZA 8", "", 100, ""],
      ["CAJAS DE PIZZA 10", "", 150, ""],
      ["CAJAS DE PIZZA 12", "", 200, ""],
      ["CAJAS DE PIZZA 14", "", 250, ""],
      ["CAJAS DE PIZZA 16", "", 150, ""],
      ["CAJAS DE PIZZA 18", "", 100, ""],
      ["CAJAS DE PIZZA 10 BLANCO", "", 50, ""],
      ["CAJAS DE PIZZA 12 BLANCO", "", 50, ""],
      ["CAJAS DE PIZZA 14 BLANCO", "", 50, ""],
      ["CAJAS DE PIZZA 16 BLANCO", "", 50, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Torito",
    items: [
      ["TORITO LITRO", "", 60, ""],
      ["TORITO GALÃ“N", "", 60, ""],
    ]
  },
  {
    nombre: "ðŸ“¦ Aluminios y encerados",
    items: [
      ["ALUMINIO 5M C/24 BON", "", 30, ""],
      ["ALUMINIO 7M C/24 BON", "", 30, ""],
      ["ALUMINIO 10M C/24 BON", "", 10, ""],
      ["ALUMINIO 5M C/24 STAR", "", 30, ""],
      ["ALUMINIO 7M C/24 STAR", "", 30, ""],
    ]
  }
];

let pagina = 0;

function render() {
  const data = inventarios[pagina];
  document.getElementById("titulo").textContent = data.nombre;
  document.getElementById("pagination-info").textContent = `${pagina + 1} de ${inventarios.length}`;

  document.getElementById("btn-anterior").disabled = pagina === 0;
  document.getElementById("btn-siguiente").disabled = pagina === inventarios.length - 1;

  const tbody = document.querySelector("#tabla tbody");
  tbody.innerHTML = "";

  data.items.forEach((row, rowIndex) => {
    const tr = document.createElement("tr");

    // Producto fijo
    const tdProducto = document.createElement("td");
    tdProducto.textContent = row[0];
    tr.appendChild(tdProducto);

    // Detalle editable numÃ©rico
    const tdDetalle = document.createElement("td");
    const inputDetalle = document.createElement("input");
    inputDetalle.type = "text";
    inputDetalle.inputMode = "numeric";
    inputDetalle.pattern = "[0-9]*";
    inputDetalle.value = row[1];
    inputDetalle.style.width = "100%";
    inputDetalle.addEventListener("input", e => {
      data.items[rowIndex][1] = e.target.value.replace(/\D/g, "");
      e.target.value = data.items[rowIndex][1];
    });
    tdDetalle.appendChild(inputDetalle);
    tr.appendChild(tdDetalle);

    // Cantidad fija
    const tdCantidad = document.createElement("td");
    tdCantidad.textContent = row[2];
    tr.appendChild(tdCantidad);

    // Pedido editable numÃ©rico
    const tdPedido = document.createElement("td");
    const inputPedido = document.createElement("input");
    inputPedido.type = "text";
    inputPedido.inputMode = "numeric";
    inputPedido.pattern = "[0-9]*";
    inputPedido.value = row[3] || "";
    inputPedido.style.width = "100%";
    inputPedido.addEventListener("input", e => {
      data.items[rowIndex][3] = e.target.value.replace(/\D/g, "");
      e.target.value = data.items[rowIndex][3];
    });
    tdPedido.appendChild(inputPedido);
    tr.appendChild(tdPedido);

    tbody.appendChild(tr);
  });
}

function siguiente() {
  if (pagina < inventarios.length - 1) {
    pagina++;
    render();
    window.scrollTo({top: 0, behavior: 'smooth'});
  }
}

function anterior() {
  if (pagina > 0) {
    pagina--;
    render();
    window.scrollTo({top: 0, behavior: 'smooth'});
  }
}

// Swipe tÃ¡ctil
let touchStartX = 0, touchEndX = 0;
document.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX, false);
document.addEventListener('touchend', e => { touchEndX = e.changedTouches[0].screenX; handleSwipe(); }, false);

function handleSwipe() {
  const minSwipeDistance = 50;
  if (touchEndX < touchStartX && touchStartX - touchEndX > minSwipeDistance) siguiente();
  if (touchEndX > touchStartX && touchEndX - touchStartX > minSwipeDistance) anterior();
}
async function enviarTelegram() {
  const data = inventarios[pagina];
  let mensaje = `ðŸ“¦ ${data.nombre}\n`;

  // recorremos filas
  data.items.forEach(row => {
    if (row[1] && row[1].trim() !== "") {
      mensaje += `${row[0]} â†’ ${row[1]}\n`;
    }
  });

  if (mensaje.trim() === `ðŸ“¦ ${data.nombre}`) {
    alert("âš  No hay inventario capturado en esta pÃ¡gina.");
    return;
  }

const BOT_TOKEN = "8303572166:AAH0xLN7798A3LROd3CoGkq0RqVogrLhZtw";
const CHAT_ID = "6617988297";

try {
  const resp = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      chat_id: CHAT_ID,
      text: mensaje,
      parse_mode: "Markdown"
    })
  });

    if (resp.ok) {
      alert("âœ… Inventario enviado a Telegram");
    } else {
      alert("âŒ Error al enviar");
    }
  } catch (err) {
    console.error(err);
    alert("âŒ Error de conexiÃ³n");
  }
}
function generarOrden() {
  const data = inventarios[pagina];
  let contenido = "";

  data.items.forEach(row => {
    if (row[3] && row[3].trim() !== "" && row[3] !== "0") {
      contenido += `<p>ðŸ“¦ ${row[0]} â†’ ${row[3]}</p>`;
    }
  });

  if (contenido === "") {
    alert("âš  No hay pedidos capturados en esta pÃ¡gina.");
    return;
  }

  document.getElementById("contenidoOrden").innerHTML = contenido;
  document.getElementById("modalOrden").style.display = "flex";
}

function cerrarOrden() {
  document.getElementById("modalOrden").style.display = "none";
}

  
// primera carga
render();
</script>
</body>
</html>
