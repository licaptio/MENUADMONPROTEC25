<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Paginaci√≥n Inventarios</title>
<style>
  :root{
    --primary:#2c3e50; --secondary:#3498db; --bg:#f7f8fb; --border:#e2e8f0;
    --text:#1f2937; --ok:#16a34a; --warn:#f59e0b; --card:#fff; --muted:#6b7280;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;
    background:var(--bg); color:var(--text); line-height:1.45;
    padding:10px 10px 84px;
  }
  .container{max-width:900px;margin:0 auto}

  header{position:sticky;top:0;z-index:50;background:var(--bg);padding:6px 0 8px}
  h2{
    font-size:1.12rem;text-align:center;color:var(--primary);
    background:var(--card);border-radius:12px;padding:8px 10px;
    box-shadow:0 2px 8px rgba(0,0,0,.06); margin-bottom:6px; display:flex;justify-content:center;gap:8px;align-items:center
  }

  /* Barra y toggles */
  .topbar{display:flex;gap:.5rem;align-items:center;justify-content:center;flex-wrap:wrap}
  .pagination-wrap{display:flex;align-items:center;gap:.5rem}
  .progress{flex:1;min-width:200px;max-width:420px;height:6px;background:#e9eef5;border-radius:999px;overflow:hidden}
  .progress > span{display:block;height:100%;background:var(--secondary);width:0%;transition:width .2s}
  .page-info{min-width:82px;text-align:center;color:#6b7a86;font-size:.85rem}

  .toggle{
    display:inline-flex;align-items:center;gap:6px;background:var(--card);border:1px solid var(--border);
    padding:4px 8px;border-radius:999px;box-shadow:0 1px 3px rgba(0,0,0,.04);user-select:none
  }
  .switch{position:relative;width:38px;height:20px;background:#e5e7eb;border-radius:999px;transition:.2s}
  .switch::after{content:"";position:absolute;top:2px;left:2px;width:16px;height:16px;background:#fff;border-radius:50%;box-shadow:0 1px 2px rgba(0,0,0,.2);transition:.2s}
  .switch.on{background:#34d399}
  .switch.on::after{left:20px}
  .label{font-size:.86rem;color:#111827}

  /* Tabla/Tarjetas */
  .table-container{background:var(--card);border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.06);overflow:hidden}
  table{width:100%;border-collapse:collapse}
  thead th{position:sticky;top:0;background:var(--primary);color:#fff;font-weight:600}
  th,td{padding:.65rem;border-bottom:1px solid var(--border);text-align:left;font-size:.93rem}

  input[type="number"], input[type="text"]{
    width:100%;padding:.5rem .55rem;border:1px solid #cfd7df;border-radius:10px;font-size:1rem;outline:none;background:#fff
  }
  input:focus{border-color:var(--secondary);box-shadow:0 0 0 3px rgba(52,152,219,.12)}

  /* MOBILE CARDS */
  @media (max-width: 720px){
    thead{display:none}
    table, tbody, tr, td{display:block;width:100%}
    tr{
      background:var(--card); margin:10px 8px; border:1.1px solid var(--border);
      border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,.05); overflow:hidden
    }
    td{border:0;border-bottom:1px dashed #e5e7eb;padding:10px 12px}
    td:last-child{border-bottom:0}

    /* Producto: una l√≠nea con ellipsis */
    td.producto{
      background:#f7fafc; font-weight:800; color:#111827; font-size:1rem;
      border-bottom:1px solid #e5e7eb; position:relative; padding:10px 12px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    td.producto::after{
      content:""; position:absolute; left:0; top:0; bottom:0; width:5px; background:linear-gradient(180deg,#60a5fa,#34d399);
    }

    /* L√≠nea compacta Inventario + Stock */
    .compact-row{display:grid;grid-template-columns:auto auto 1fr;align-items:center;gap:10px}
    .tag{font-size:.82rem;color:#6b7280}
    .stock-badge{font-weight:700; font-size:.95rem; padding:.2rem .5rem; border:1px solid #e5e7eb; border-radius:8px; background:#f9fafb}
    .inv-input{max-width:7ch} /* ~5‚Äì6 caracteres visibles */
  }

  /* Barra acciones compacta */
  .actions{
    position:fixed;left:0;right:0;bottom:0;background:#ffffffee;
    backdrop-filter:blur(6px);border-top:1px solid #e9eef5;padding:8px;z-index:60
  }
  .actions .grid{
    max-width:900px;margin:0 auto;display:grid;grid-template-columns:repeat(4,1fr);gap:6px
  }
  button{
    padding:.6rem .5rem;font-size:.95rem;font-weight:700;border:none;border-radius:12px;color:#fff;cursor:pointer;
    box-shadow:0 1px 4px rgba(0,0,0,.06);transition:transform .05s
  }
  button:active{transform:scale(.98)}
  #btn-anterior{background:#9ca3af}
  #btn-enviar{background:var(--warn)}
  #btn-orden{background:#6d28d9}
  #btn-siguiente{background:var(--ok)}
  button:disabled{opacity:.55;cursor:not-allowed}

  /* Modal */
  #modalOrden{display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);justify-content:center;align-items:center;z-index:1000;padding:16px}
  .modal-card{background:#fff;border-radius:14px;padding:16px;max-width:520px;width:100%;box-shadow:0 8px 20px rgba(0,0,0,.22)}
  .modal-card h3{margin-bottom:.4rem;text-align:center}
  .modal-card .content{max-height:55vh;overflow:auto;border:1px solid #eee;border-radius:10px;padding:10px}
  .modal-card .close{margin-top:10px;width:100%;background:var(--secondary)}
  .hidden{display:none !important}
</style>
</head>
<body>
  <div class="container">
    <header>
      <h2><span>üì¶</span><span id="titulo"></span></h2>

      <div class="topbar">
        <div class="pagination-wrap">
          <div class="progress"><span id="progress-bar"></span></div>
          <div class="page-info" id="pagination-info"></div>
        </div>

        <!-- Toggle Mostrar pedido -->
        <div class="toggle" id="togglePedido" role="button" aria-pressed="false" tabindex="0" onclick="togglePedido()">
          <div class="switch" id="switchPedido"></div>
          <span class="label">Mostrar pedido</span>
        </div>

        <!-- üîí Toggle Bloquear navegaci√≥n -->
        <div class="toggle" id="toggleLock" role="button" aria-pressed="false" tabindex="0" onclick="toggleLock()">
          <div class="switch" id="switchLock"></div>
          <span class="label">Bloquear navegaci√≥n</span>
        </div>
      </div>
    </header>

    <div class="table-container">
      <table id="tabla">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Inventario</th>
            <th>Stock</th>
            <th id="th-pedido">Pedido</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Barra de acciones -->
  <div class="actions">
    <div class="grid">
      <button id="btn-anterior" onclick="anterior()">‚¨Ö Anterior</button>
      <button id="btn-enviar" onclick="enviarTelegram()">üì§ Enviar InvTEL</button>
      <button id="btn-orden" onclick="generarOrden()">üßæ Orden</button>
      <button id="btn-siguiente" onclick="siguiente()">Siguiente ‚û°</button>
    </div>
  </div>

  <!-- Modal ORDEN DE COMPRA -->
  <div id="modalOrden">
    <div class="modal-card">
      <h3>ORDEN DE COMPRA PDD031204KL5</h3>
      <div id="contenidoOrden" class="content"></div>
      <button class="close" onclick="cerrarOrden()">Cerrar</button>
    </div>
  </div>

<script>
/* ===== Datos ===== */
const inventarios = [
  { nombre:"üì¶ Celof√°n", items:[
    ["PAPEL CELOF√ÅN ROJO 25KG","",20,""],
    ["PAPEL CELOF√ÅN AMARILLO 25KG","",10,""],
    ["PAPEL CELOF√ÅN BLANCO 25KG","",7,""],
    ["BOLSA CELOF√ÅN 14X20 C35 CAJA","",4,""],
  ]},
  { nombre:"üì¶ Az√∫cares y derivados", items:[
    ["AZ√öCAR MORENA 25","",100,""],
    ["AZ√öCAR BLANCA 25","",20,""],
    ["MORENA SWITEN 907","",30,""],
    ["AZ√öCAR GLASS 6X","",3,""],
    ["F√âCULA DE MA√çZ","",3,""],
    ["AZ√öCAR MOSCABADA","",2,""],
    ["GLUCOSA 19 LTS 27K","",2,""],
  ]},
  { nombre:"üì¶ Porcionados", items:[
    ["SAL DELAGG C/3000PZ","",5,""],
    ["AZUCAR PORCION C/1000","",10,""],
    ["CHILE QUEBRADO C/1000","",30,""],
]},

  { nombre:"üì¶ L√≠quidos", items:[
    ["MORENA SWITEN 907","",50,""],
    ["NUTRILECHE C90 PAQ","",8,""],
    ["KARTAMUS 12 CAMA","",100,""],
    ["HARIMASA C10","",100,""],
    ["CHILE FARO ROD","",100,""],
    ["KLEENEX 80","",100,""],
  ]},
  { nombre:"üì¶ INIX", items:[
    ["HQR1230","",30,""],["HQR1238","",10,""],["HQR1245","",10,""],
    ["HQR30 VITAFILM","",15,""],["AL2923 REC CHICA","",5,""],
    ["AL4032O OVALADA","",5,""],["AL4130R REC GRANDE","",10,""],
    ["F3029","",2,""],["FCB100012 CAJAB/6","",10,""],["32PP","",50,""],
    ["16PP","",40,""],["8PP","",10,""],["TPP8","",100,""],
  ]},
  { nombre:"üì¶ Pl√°sticos", items:[
    ["50X70 NEGRA C/25KG","",10,""],["70X90 NEGRA C/25KG","",20,""],
    ["90X120 NEGRA C/25KG","",40,""],["EMPLAYE P/ENTARIMAR","",300,""],
    ["REVOLUCI√ìN CORTO","",50,""],["REVOLUCI√ìN LARGO","",20,""],
    ["BOLSA 55X65","",4,""],["BOLSA 65X65","",4,""],["VIVERO CHICA","",10,""],
    ["VIVERO MEDIANA","",10,""],["VIVERO GRANDE","",10,""],["ROLLOS NEGROS","",4,""],
    ["ROLLOS TRANSPARENTE","",4,""],["10X20 BOLLERA C/200","",20,""],["BOLSA GOURMET","",3,""],
  ]},
{ nombre:"üì¶ Cerillos", items:[
  ["TALISMAN DE LUJO 20/5","",0,""],
  ["CLASICOS DE LUJO 20/5","",10,""],
  ["MANOLA","",2,""],
  ["FLAMA 50/5 DE 115PZ","",2,""],
  ["FLAMA 50/5 DE 200PZ","",2,""],
  ["MAYA 10/50","",40,""],
]},

  { nombre:"üì¶ L√≠quido Zapata", items:[
  ["BIG COLA 3.3","",12,""],
  ["BIG COLA 1.5","",3,""],
  ["BIG COLA 500 ML","",3,""],
  ["CIFRUT 3.3","",0,""],
  ["CIFRUT 625","",2,""],
  ["CIFRUT 300","",2,""],
  ["BIG COLA 300","",0,""],
  ["CHECHI FRESCO 140 ML","",800,""],
  ["AGUA 500 ML T72","",12,""],
  ["AGUA 1 L T80","",12,""],
  ["AGUA 1.5 T42","",4,""],
]},
{ nombre:"üì¶ Converemex", items:[
  ["VASO 104","",10,""],
  ["VASO 106","",100,""],
  ["VASO 108","",60,""],
  ["VASO 110","",150,""],
  ["VASO 112","",150,""],
  ["VASO 114","",100,""],
  ["VASO 116","",100,""],
  ["VASO 132","",100,""],
  ["VASO 120","",0,""],
  ["ENVASE 704","",20,""],
  ["ENVASE 706","",60,""],
  ["ENVASE 708","",60,""],
  ["ENVASE 712","",10,""],
  ["ENVASE 716","",100,""],
  ["ENVASE 732","",200,""],
  ["TAPA 404 LISO","",0,""],
  ["TAPA 406 LISO","",0,""],
  ["TAPA 406 PIQUETE","",30,""],
  ["TAPA PS 408 POPOTE","",10,""],
  ["TAPA PS 410 POPOTE","",10,""],
  ["TAPA PS 412 POPOTE(112,706)","",40,""],
  ["TAPA PS 414 POPOTE(114,116)","",30,""],
  ["TAPA PS 416 POPOTE(132,716,732)","",50,""],
  ["TAPA EPS 516 PIQUETE","",20,""],
]},

  { nombre:"üì¶ Palmex", items:[
  ["10X10 C/15 KGS. PASTA","",80,""],
  ["ANILLO C/20 KGS.","","-",""],
  ["DONA C/20 KGS.","","-",""],
  ["ESPACIAL C/15K","","-",""],
  ["MINI CUADRO C/20 KGS.","",20,""],
  ["ROTINI C/20 KGS.","",20,""],
  ["RUEDA GRANDE C/13 KGS.","",20,""],
  ["HOJUELA PAPA 8 KGS.","",30,""],
  ["ARITOS 3 KGS.","","-",""],
  ["ZUCARIN C/15 KGS.","","-",""],
  ["CORN FLAKES 10 KGS.","","-",""],
  ["ARROZ CHOCOLATE","","-",""],
]},
{ nombre:"üì¶ Mega Alimento", items:[
  ["SALSA BOT 1 LTO. C/12","",150,""],
  ["SALSA BOT 1.5 C/12","",40,""],
  ["SALSA BOT 10 GRS C/840","",40,""],
  ["SALSA BOT 5 GRS. C/1500","",15,""],
  ["SALSA BOT 500 ML. C/24","",150,""],
  ["SALSA BOT DE GALON C/6","",80,""],
  ["SALSA BOT LIMON 1 LTO C/12","",30,""],
  ["MAYO STAR VALUE AZUL 3.45","",20,""],
  ["MAYO STAR PORC. 6/200","",5,""],
  ["MOSTAZA STAR VALUE 6/3.53","",5,""],
  ["MOSTAZA STAR PORC. 6/200","",5,""],
  ["CATSUP STAR 3.8 KGS. C/6","",20,""],
  ["CATSUP STAR VALUE 6/200","",30,""],
  ["ADEREZO STAR VALUE 3.52","",20,""],
  ["MAYO MEGA 3.57 KGS. C/6","",15,""],
  ["ADEREZO MEGA C/6 DE 3.65","",15,""],
  ["CATSUP MEGA RICA 6/4.5","",15,""],
  ["MOSTAZA MEGA 6/3.7","",15,""],
]},
{ nombre:"üì¶ BOTANAS", items:[
  ["SABRISURTIDO 35","",150,""],
  ["TOSTITO VERDE","",30,""],
  ["TOSTITO MORADO","",10,""],
  ["FRITURA ENCANTO","",10,""],
]},
  { nombre:"üì¶ Comida para mascotas", items:[
    ["RINGO C20","",100,""],["PEDIGREE ADULTO","",10,""],
    ["PEDIGREE CACHORRO","",10,""],["WHISKAS","",10,""],
  ]},
  { nombre:"üì¶ Papel higi√©nico y servilletas", items:[
    ["HIG JUMBO DALIA 360","",30,""],["HIG JUNIOR DALIA 180","",30,""],
    ["MARLY 12 C/500","",30,""],["BARRA MESA C/24","",10,""],
    ["SANITA","",40,""],["TR160 C/6 MOC BLA","",30,""],["MOCAMBO LITHE C/16","",30,""],
  ]},
  { nombre:"üì¶ Cacahuates, botanas, hoja tamal y chile japon√©s", items:[
    ["CACAHUATE BLANCO SALADO 10KG","",1,""],["CACAHUATE ENCHILADO MITADES 10KG","",3,""],
    ["CACAHUATE GARAPI√ëADO 10KG","",20,""],["CACAHUATE SALADO 10KG","",20,""],
    ["CANTINERO TOTOPO Y AJO","",15,""],["MIXTO CON FRITURA 10KG","",10,""],
    ["JAPON√âS HOT NUT 10KG","",10,""],["JAPON√âS 10KG","",10,""],
    ["CHICHARR√ìN CERDO KILO","",3,""],["CHICHARR√ìN KRANKY KILO","",3,""],
    ["HOJA TAMAL BULTOS","",10,""],["CHILE JAPON√âS BULTOS","",1,""],
  ]},
  { nombre:"üì¶ Conos", items:[["CONO DEL 8","",3,""],["CONO DEL 35","",10,""]]},
{ nombre:"üì¶ Cremas, aderezos y dem√°s", items:[
  ["CREMA CAMELIA 10/1KG","",100,""],
  ["ADEREZO VIRMAR 10/1KG","",100,""],
  ["ADEREZO FROMELY 10/850GR","",40,""],
  ["CREMA FROMELY 10/850GR","",40,""],
  ["JUGO BONLANTI 4/10","",100,""],
  ["BOLIFRUT BONLATI 10/15","",15,""],
  ["TROLEBOLI BONLANTI 4/10","",10,""],
  ["COBERTURA BONLATI","",5,""],
  ["COBERTURA CURIOS","",50,""],
]},
 { nombre:"üì¶ Puratos", items:[
  ["CREMA VEGETAL AMBIANTE","",30,""],
  ["CAJETA HORNEABLE PURATO","",10,""],
  ["GLASSE DE FRESA PURATOS","",20,""],
  ["GLASSE DE PI√ëA PURATOS","",10,""],
  ["RELLENO DE FRESA PURATOS","",10,""],
  ["RELLENO DE PI√ëA PURATOS","",10,""],
  ["RELLENO DE VAINILLA","",5,""],
]},
{ nombre:"üì¶ Bolsas y rollos", items:[
  // BOLSA NATURAL CORTADA
  ["BOLSA NATURAL CORTADA ‚Ä¢ 6X12 NAT","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 8X12 NAT","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 10X20","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 10X25","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 12X20","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 14X20","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 15X25","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 18X26","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 20X30","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 25X35","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 25X40","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 30X50","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 30X60 CAL 300","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 40X60","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 50X70","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 60X90","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 70X90","",0,""],
  ["BOLSA NATURAL CORTADA ‚Ä¢ 90X1.2","",0,""],

  // BOLSA CAMISETA POLIPAPEL BIO
  ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ MINI","",0,""],
  ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ CH","",0,""],
  ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ MED","",0,""],
  ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ GRAD","",0,""],
  ["BOLSA CAMISETA POLIPAPEL BIO ‚Ä¢ JUMBO","",0,""],

  // BOLSA CAMISETA POLISEDA
  ["BOLSA CAMISETA POLISEDA ‚Ä¢ MINI","",0,""],
  ["BOLSA CAMISETA POLISEDA ‚Ä¢ CH","",0,""],
  ["BOLSA CAMISETA POLISEDA ‚Ä¢ MED","",0,""],
  ["BOLSA CAMISETA POLISEDA ‚Ä¢ GRAD","",0,""],

  // BOLSA CAMISETA BAJA NEGRA
  ["BOLSA CAMISETA BAJA NEGRA ‚Ä¢ CH","",0,""],
  ["BOLSA CAMISETA BAJA NEGRA ‚Ä¢ MED","",0,""],
  ["BOLSA CAMISETA BAJA NEGRA ‚Ä¢ GRAD","",0,""],

  // ROLLO DE ALTA
  ["ROLLO DE ALTA ‚Ä¢ 15X26","",0,""],
  ["ROLLO DE ALTA ‚Ä¢ 18X26","",0,""],
  ["ROLLO DE ALTA ‚Ä¢ 20X30","",0,""],
  ["ROLLO DE ALTA ‚Ä¢ 20X30 C120","",0,""],
  ["ROLLO DE ALTA ‚Ä¢ 25X35","",0,""],
  ["ROLLO DE ALTA ‚Ä¢ 25X40","",0,""],
  ["ROLLO DE ALTA ‚Ä¢ 30X40","",0,""],
  ["ROLLO DE ALTA ‚Ä¢ 30X50","",0,""],
  ["ROLLO DE ALTA ‚Ä¢ 40X60","",0,""],
  ["ROLLO DE ALTA ‚Ä¢ 50X70","",0,""],

  // ROLLO ALTA TIPO AMERICANO
  ["ROLLO ALTA TIPO AMERICANO ‚Ä¢ 20X30 USA","",0,""],
  ["ROLLO ALTA TIPO AMERICANO ‚Ä¢ 25X40 USA","",0,""],

  // BOLSA BASURA
  ["BOLSA BASURA ‚Ä¢ 50X70","",0,""],
  ["BOLSA BASURA ‚Ä¢ 70X90","",0,""],
  ["BOLSA BASURA ‚Ä¢ 90X120","",0,""]
]},

  { nombre:"üì¶ Tripas", items:[
    ["TRIPA 21","",4,""],["TRIPA 23","",4,""],["TRIPA 26","",2,""],
    ["TRIPA 28","",4,""],["TRIPA 30","",2,""],["TRIPA 32","","-",""],
    ["TRIPA 34","","-",""],["TRIPA 40","","-",""],
  ]},
  { nombre:"üì¶ Vinagres y vainilla", items:[
    ["VINAGRE BLANCO 1LT C/12","",5,""],["VINAGRE BLANCO 4/4L","",10,""],
    ["VINAGRE BLANCO 355ML C/24","",3,""],["VINAGRE DE MANZANA 355ML C/24","",5,""],
    ["VINAGRE DE MANZANA GAL√ìN","",30,""],["VINAGRE DE MANZANA 12/1LT","",15,""],
    ["VAINILLA 355ML C/24","",2,""],["VAINILLA GAL√ìN C/4","",4,""],
    ["VAINILLA LITRO C/12","",2,""],["VAINILLA BLANCA 1LT","",1,""],
  ]},
  { nombre:"üì¶ Brochetas, c√≥nicos y vasos", items:[
    ["P/BROCHETA No.6 15CM","",2,""],["P/BROCHETA No.8 20CM","",2,""],
    ["P/BROCHETA No.10 25CM","",2,""],["P/BROCHETA No.12 30CM","",3,""],
    ["C√ìNICO 106","",10,""],["C√ìNICO 104","",5,""],["TAPA 0 CUEVAS C/2000","",20,""],
    ["VASO 0 CUEVAS C/2000","",20,""],["TAPA 4-A CUEVAS C/2000","",3,""],
    ["VASO 4-A CUEVAS C/2000","",3,""],
  ]},
  { nombre:"üì¶ Ciervo 2", items:[  
  ["MIEL DE ABEJA 24/175GR","",2,""],  
  ["CHAR RECT 12 PRIMO","",2,""],  
  ["CHAR RECT 14 CUEVAS","",2,""],  
  ["CHAR RECT 20 PRIMO C/100","",2,""],  
  ["CHAR RED. #14 PRIMO C/250","",2,""],  
  ["CHAR REDONDA 12 PRIMO C/300","",2,""],  
  ["CHAR REDONDA 20 PRIMO C/100","",2,""],  
  ["VASO PLAST 10 CRISTAL","",4,""],  
  ["VASO GELATINERO 14","",1,""],  
  ["VASO PLAST 15 CUEVAS","",1,""],  
  ["VASO PLAST 16 CUEVAS","",1,""],  
  ["VASO PLAST 17 CUEVAS","",1,""],  
  ["VASO PLAST 19 CUEVAS","",1,""],  
  ["VASO PLAST 1-C CUEVAS","",10,""],  
  ["PALILLO DIENTES CIERVO 250/14","",2,""],  
  ["PALILLO DIENTES BOTE 250/12","",2,""],  
]},

  { nombre:"üì¶ Cajas de pizza", items:[
    ["CAJAS DE PIZZA 8","",100,""],["CAJAS DE PIZZA 10","",150,""],
    ["CAJAS DE PIZZA 12","",200,""],["CAJAS DE PIZZA 14","",250,""],
    ["CAJAS DE PIZZA 16","",150,""],["CAJAS DE PIZZA 18","",100,""],
    ["CAJAS DE PIZZA 10 BLANCO","",50,""],["CAJAS DE PIZZA 12 BLANCO","",50,""],
    ["CAJAS DE PIZZA 14 BLANCO","",50,""],["CAJAS DE PIZZA 16 BLANCO","",50,""],
  ]},
  { nombre:"üì¶ Torito", items:[["TORITO LITRO","",60,""],["TORITO GAL√ìN","",60,""]]},
  { nombre:"üì¶ Aluminios y encerados", items:[
    ["ALUMINIO 5M C/24 BON","",30,""],["ALUMINIO 7M C/24 BON","",30,""],
    ["ALUMINIO 10M C/24 BON","",10,""],["ALUMINIO 5M C/24 STAR","",30,""],
    ["ALUMINIO 7M C/24 STAR","",30,""],
  ]},
{ nombre:"üì¶ REYMA DESECHABLE 1", items:[
  // CHAROLA
  ["CHAROLA ‚Ä¢ CH855RE","",0,""],
  ["CHAROLA ‚Ä¢ CH066RE","",0,""],
  ["CHAROLA ‚Ä¢ CH007","",0,""],
  ["CHAROLA ‚Ä¢ CH835","",0,""],
  ["CHAROLA ‚Ä¢ CH105","",0,""],
  ["CHAROLA ‚Ä¢ CH1014","",0,""],
  ["CHAROLA ‚Ä¢ CH9H","",0,""],
  ["CHAROLA ‚Ä¢ CH8S","",0,""],
  ["CHAROLA ‚Ä¢ CH855MA","",0,""],
  ["CHAROLA ‚Ä¢ CH066MA","",0,""],

  // CONTENEDOR
  ["CONTENEDOR ‚Ä¢ CN7X7D4P","",0,""],
  ["CONTENEDOR ‚Ä¢ CN7X7L4P","",0,""],
  ["CONTENEDOR ‚Ä¢ CN8X8D4P","",0,""],
  ["CONTENEDOR ‚Ä¢ CN8X8L4P","",0,""],
  ["CONTENEDOR ‚Ä¢ CN9X9D4P","",0,""],
  ["CONTENEDOR ‚Ä¢ CN9X9L4P","",0,""],
  ["CONTENEDOR ‚Ä¢ CNH10P (HAM)","",0,""],
  ["CONTENEDOR ‚Ä¢ CNHD (HOT DOG)","",0,""],
  ["CONTENEDOR ‚Ä¢ CNHO (HOGIE)","",0,""],

  // PLATOS TERMICOS
  ["PLATOS TERMICOS ‚Ä¢ PH4","",0,""],
  ["PLATOS TERMICOS ‚Ä¢ PH6","",0,""],
  ["PLATOS TERMICOS ‚Ä¢ PH8","",0,""],
  ["PLATOS TERMICOS ‚Ä¢ PH10","",0,""],
  ["PLATOS TERMICOS ‚Ä¢ PT006","",0,""],
  ["PLATOS TERMICOS ‚Ä¢ PT9D","",0,""],
  ["PLATOS TERMICOS ‚Ä¢ PT8D","",0,""],
  ["PLATOS TERMICOS ‚Ä¢ PT8L","",0,""],
  ["PLATOS TERMICOS ‚Ä¢ PT10D","",0,""],
  ["PLATOS TERMICOS ‚Ä¢ PT10L","",0,""],

  // LAMINA CORTADA
  ["LAMINA CORTADA ‚Ä¢ LAC3040","",0,""]
]},
{ nombre:"üì¶ REYMA DESECHABLE 2", items:[
  // CHAROLAS COLORES
  ["CHAROLAS COLORES ‚Ä¢ CH855AM","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH855NE","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH855RS","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH855AZUL","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH855RJ","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH007AZUL","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH007AM","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH007NE","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH007RS","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH007RJ","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH9HAM","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH9HNE","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH9HRS","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH9HAZUL","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH9HRJ","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH066AM","",0,""],
  ["CHAROLAS COLORES ‚Ä¢ CH8SNEGRA","",0,""],

  // CONTENEDORES NEGROS
  ["CONTENEDORES NEGROS ‚Ä¢ CN7X7LNE","",0,""],
  ["CONTENEDORES NEGROS ‚Ä¢ CN7X7DNE","",0,""],
  ["CONTENEDORES NEGROS ‚Ä¢ CN8X8DNE","",0,""],
  ["CONTENEDORES NEGROS ‚Ä¢ CN8X8LNE","",0,""],
  ["CONTENEDORES NEGROS ‚Ä¢ CN9X9DNE","",0,""],
  ["CONTENEDORES NEGROS ‚Ä¢ CN9X9LNE","",0,""],
  ["CONTENEDORES NEGROS ‚Ä¢ CGHAMNEGRA","",0,""],

  // DOMOS
  ["DOMOS ‚Ä¢ R14","",0,""]
]},
{ nombre:"üì¶ REYMA DESECHABLE 3", items:[
  // VASOS PL√ÅSTICOS
  ["VASOS PLASTICOS ‚Ä¢ VP4A","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP4CH","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VPS5A","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP51/2","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP6","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP7","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP8","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP10","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP12","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP14","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP16A","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ VP16L","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ ENV1LT","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ ENV1/2LT","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ ENV1/4LT","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ TAPA REY (TR) VP","",0,""],
  ["VASOS PLASTICOS ‚Ä¢ TAP REY C/R (TRR)","",0,""],

  // VASOS T√âRMICOS
  ["VASOS TERMICOS ‚Ä¢ VT4A","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT4CH","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT6","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT8","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT8A","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT10","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT12","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT12A","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT14","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT16","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT1/2LT","",0,""],
  ["VASOS TERMICOS ‚Ä¢ VT1LT","",0,""],

  // TAPAS P/ VASO PL√ÅSTICO
  ["TAPA P/ VASO PLASTICO ‚Ä¢ TP1OZ","",0,""],
  ["TAPA P/ VASO PLASTICO ‚Ä¢ TP2OZ","",0,""],
  ["TAPA P/ VASO PLASTICO ‚Ä¢ TP51/24CH","",0,""],
  ["TAPA P/ VASO PLASTICO ‚Ä¢ TP4A8","",0,""],
  ["TAPA P/ VASO PLASTICO ‚Ä¢ TP10","",0,""],
  ["TAPA P/ VASO PLASTICO ‚Ä¢ TP1214","",0,""],
  ["TAPA P/ VASO PLASTICO ‚Ä¢ TP16","",0,""],

  // TAPAS P/ VASO T√âRMICO
  ["TAPA P/ VASO TERMICO ‚Ä¢ TVT8","",0,""],
  ["TAPA P/ VASO TERMICO ‚Ä¢ TVT10","",0,""],
  ["TAPA P/ VASO TERMICO ‚Ä¢ TVT4A12","",0,""],
  ["TAPA P/ VASO TERMICO ‚Ä¢ TVT141620","",0,""],
  ["TAPA P/ VASO TERMICO ‚Ä¢ TVT4CH6","",0,""],
  ["TAPA P/ VASO TERMICO ‚Ä¢ TVT1LTR","",0,""],
  ["TAPA P/ VASO TERMICO ‚Ä¢ TVT1LT","",0,""],
  ["TAPA P/ VASO TERMICO ‚Ä¢ TTVT1L (TERM)","",0,""],

  // L√çNEA EU (VPP Y TP)
  ["LINEA EU ‚Ä¢ VP10EU","",0,""],
  ["LINEA EU ‚Ä¢ VP12EU","",0,""],
  ["LINEA EU ‚Ä¢ VP14EU","",0,""],
  ["LINEA EU ‚Ä¢ VP16EU","",0,""],
  ["LINEA EU ‚Ä¢ VP32EU","",0,""],
  ["LINEA EU ‚Ä¢ TPEUR (RANURA)","",0,""],
  ["LINEA EU ‚Ä¢ TPEU (LISA)","",0,""],
  ["LINEA EU ‚Ä¢ TPDEU (DOMO)","",0,""],
  ["LINEA EU ‚Ä¢ TP32EUR (RANURA)","",0,""],
  ["LINEA EU ‚Ä¢ TP32EU (LISA)","",0,""],
  ["LINEA EU ‚Ä¢ TPD16 EU","",0,""]
]},
{ nombre:"üì¶ REYMA DESECHABLE 4", items:[

  // POPOTE BIO REYMA
  ["POPOTE BIO REYMA ‚Ä¢ ESTUCH 21 BIO 4/500","",0,""],
  ["POPOTE BIO REYMA ‚Ä¢ ESTUCH 26 BIO 4/500","",0,""],

  // LINEA BIO REYMA
  ["LINEA BIO REYMA ‚Ä¢ CH066MABIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CH855MABIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CN7X7L4PBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CN7X7D4PBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CN8X8D4PBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CN8X8L4PBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CN9X9D4PBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CN9X9L4PBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CNH10PBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CH835BIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CH007BIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CH855REBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ CH9HBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ PT9DBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ PT8LBIO","",0,""],
  ["LINEA BIO REYMA ‚Ä¢ PT8DBIO","",0,""]

]},

];
/* Estado UI */
let pagina = 0;
let mostrarPedido = false;
let lockNav = false;   // üîí

/* LocalStorage (opcional: descomenta si quieres persistir) */
function saveData(){ localStorage.setItem("inventariosData", JSON.stringify(inventarios)); }
function loadData(){
  const d = localStorage.getItem("inventariosData");
  if(!d) return;
  try{
    const parsed = JSON.parse(d);
    if(Array.isArray(parsed)){
      for(let i=0;i<parsed.length;i++){ if(inventarios[i]) inventarios[i].items = parsed[i].items; }
    }
  }catch(e){ console.error(e); }
}

/* Toggles */
function togglePedido(){
  mostrarPedido = !mostrarPedido;
  document.getElementById('switchPedido').classList.toggle('on', mostrarPedido);
  document.getElementById('togglePedido').setAttribute('aria-pressed', String(mostrarPedido));
  document.getElementById('th-pedido').classList.toggle('hidden', !mostrarPedido);
  render();
}
function toggleLock(){
  lockNav = !lockNav;
  document.getElementById('switchLock').classList.toggle('on', lockNav);
  document.getElementById('toggleLock').setAttribute('aria-pressed', String(lockNav));
  document.getElementById("btn-anterior").disabled = lockNav || pagina===0;
  document.getElementById("btn-siguiente").disabled = lockNav || (pagina===inventarios.length-1);
}

/* Render */
function render(){
  const data = inventarios[pagina];
  document.getElementById("titulo").textContent = data.nombre;
  document.getElementById("pagination-info").textContent = `${pagina+1} de ${inventarios.length}`;
  document.getElementById("progress-bar").style.width = (((pagina+1)/inventarios.length)*100) + "%";

  document.getElementById("btn-anterior").disabled = lockNav || pagina===0;
  document.getElementById("btn-siguiente").disabled = lockNav || (pagina===inventarios.length-1);
  document.getElementById('th-pedido').classList.toggle('hidden', !mostrarPedido);

  const tbody = document.querySelector("#tabla tbody");
  tbody.innerHTML = "";

  data.items.forEach((row, i) => {
    const tr = document.createElement("tr");

    // Producto (1 l√≠nea, ellipsis)
    const tdProducto = document.createElement("td");
    tdProducto.textContent = row[0];
    tdProducto.className = "producto";
    tr.appendChild(tdProducto);

    // Fila compacta: Inventario + Stock (en m√≥vil quedan en una l√≠nea)
    const tdInv = document.createElement("td");
    const wrap = document.createElement("div");
    wrap.className = "compact-row";

    const tagInv = document.createElement("span");
    tagInv.className = "tag"; tagInv.textContent = "Inventario";
    const inputInv = document.createElement("input");
    inputInv.type = "number"; inputInv.inputMode = "numeric"; inputInv.min = "0";
    inputInv.value = row[1]; inputInv.className = "inv-input";
    inputInv.addEventListener("input", e => {
      const v = e.target.value.replace(/\D/g,"");
      inventarios[pagina].items[i][1] = v; e.target.value = v;
      // saveData();
    });

    const stockBadge = document.createElement("span");
    stockBadge.className = "stock-badge";
    stockBadge.textContent = "Stock " + (row[2] ?? "").toString();

    wrap.appendChild(tagInv);
    wrap.appendChild(inputInv);
    wrap.appendChild(stockBadge);
    tdInv.appendChild(wrap);
    tr.appendChild(tdInv);

    // Pedido (opcional)
    const tdPedido = document.createElement("td");
    if(!mostrarPedido){ tdPedido.classList.add('hidden'); }
    const inputPed = document.createElement("input");
    inputPed.type = "number"; inputPed.inputMode = "numeric"; inputPed.min = "0";
    inputPed.value = row[3] || "";
    inputPed.addEventListener("input", e => {
      const v = e.target.value.replace(/\D/g,"");
      inventarios[pagina].items[i][3] = v; e.target.value = v;
      // saveData();
    });
    tdPedido.appendChild(inputPed);
    tr.appendChild(tdPedido);

    tbody.appendChild(tr);
  });
}

function siguiente(){ if(lockNav) return; if(pagina < inventarios.length-1){ pagina++; render(); window.scrollTo({top:0,behavior:'smooth'}); } }
function anterior(){ if(lockNav) return; if(pagina > 0){ pagina--; render(); window.scrollTo({top:0,behavior:'smooth'}); } }

/* Swipe t√°ctil (respeta bloqueo) */
let touchStartX=0, touchEndX=0;
document.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX, false);
document.addEventListener('touchend', e => { touchEndX = e.changedTouches[0].screenX; handleSwipe(); }, false);
function handleSwipe(){ if(lockNav) return; const min=50;
  if(touchEndX < touchStartX && (touchStartX-touchEndX)>min) siguiente();
  if(touchEndX > touchStartX && (touchEndX-touchStartX)>min) anterior();
}

/* Telegram */
async function enviarTelegram(){
  const data = inventarios[pagina];
  let mensaje = `üì¶ ${data.nombre}\n`;
  data.items.forEach(r => { if(r[1] && r[1].trim()!=="") mensaje += `${r[0]} ‚Üí ${r[1]}\n`; });
  if(mensaje.trim()===`üì¶ ${data.nombre}`){ alert("‚ö† No hay inventario capturado en esta p√°gina."); return; }

  const BOT_TOKEN = "8303572166:AAH0xLN7798A3LROd3CoGkq0RqVogrLhZtw";
  const CHAT_ID = "6617988297";
  try{
    const resp = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
      method:"POST", headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ chat_id:CHAT_ID, text:mensaje })
    });
    alert(resp.ok ? "‚úÖ Inventario enviado a Telegram" : "‚ùå Error al enviar");
  }catch(err){ console.error(err); alert("‚ùå Error de conexi√≥n"); }
}

/* Orden */
function generarOrden(){
  const data = inventarios[pagina];
  let contenido = "";
  data.items.forEach(r => {
    if(r[3] && r[3].trim()!=="" && r[3]!=="0"){ contenido += `<p>üì¶ ${r[0]} ‚Üí <strong>${r[3]}</strong></p>`; }
  });
  if(!contenido){ alert("‚ö† No hay pedidos capturados en esta p√°gina."); return; }
  document.getElementById("contenidoOrden").innerHTML = contenido;
  document.getElementById("modalOrden").style.display = "flex";
}
function cerrarOrden(){ document.getElementById("modalOrden").style.display = "none"; }

/* Init */
loadData();   // si no quieres persistencia, comenta esta l√≠nea y tambi√©n saveData() en inputs
render();
</script>
</body>
</html>
